"use strict";
let gulp = require('gulp')
let less = require('gulp-less')
let cssmin = require('gulp-clean-css')
let sourcemaps = require('gulp-sourcemaps')
let plumber = require('gulp-plumber')
let compileless = function () {
        let publishLess = function (src, dst, codepth) {
                let src=this.srcLess
                let  dst =this.dstPath
                console.log('编译压缩less')
                console.log('源文件: '+src.join(','))
                console.log('目标路径: '+dst)
                return gulp.src(src)
                        .pipe(plumber())
                        .pipe(less({processImport: false}))
                      //  .pipe(cssmin()) //兼容IE7及以下需设置compatibility属性 .pipe(cssmin({compatibility: 'ie7'}))
                        .pipe(plumber.stop())
                        .pipe(gulp.dest(dst));
        }
        return  publishLess
}
export default compileless
